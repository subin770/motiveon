<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="workReply-Mapper">

	<!-- ================== resultMap ================== -->
	<resultMap id="objectionMap"
		type="com.motiveon.dto.ObjectionDTO">
		<id property="wrno" column="WRNO" jdbcType="INTEGER" />
		<result property="content" column="WRCONTENT"
			jdbcType="VARCHAR" />
		<result property="wrregdate" column="WRREGDATE" jdbcType="DATE" />
		<result property="updatedate" column="UPDATEDATE"
			jdbcType="DATE" />
		<result property="wcode" column="WCODE" jdbcType="VARCHAR" />
		<result property="eno" column="ENO" jdbcType="INTEGER" />
		<result property="parentWrno" column="PARENT_WRNO"
			jdbcType="INTEGER" />
	</resultMap>

	<insert id="insertObjection"
		parameterType="com.motiveon.dto.ObjectionDTO">
		INSERT INTO WORKREPLY (WRNO, WRCONTENT, WCODE, ENO)
		VALUES (WORKREPLY_SEQ.NEXTVAL, #{content}, #{wcode}, #{eno})
	</insert>

	<select id="selectObjectionList" parameterType="string"
		resultType="com.motiveon.dto.WorkReplyVO">
		SELECT WRNO, WRCONTENT, WCODE, ENO, WRREGDATE
		FROM WORKREPLY
		WHERE WCODE = #{wcode}
		ORDER BY WRNO DESC
	</select>

	<select id="selectObjectionByWrno" parameterType="int"
		resultType="com.motiveon.dto.WorkReplyVO">
		SELECT WRNO, WRCONTENT, WCODE, ENO, WRREGDATE
		FROM WORKREPLY
		WHERE WRNO = #{wrno}
	</select>
	<!-- ================== SELECT ================== -->
	<!-- 특정 업무의 이의신청 목록 조회 -->
	<select id="selectByWcode" parameterType="string"
		resultMap="objectionMap">
		SELECT WRNO, WRCONTENT, WRREGDATE, UPDATEDATE, WCODE, ENO, PARENT_WRNO
		FROM WORKREPLY
		WHERE WCODE = #{wcode,jdbcType=VARCHAR}
		ORDER BY WRREGDATE DESC
	</select>

</mapper>
