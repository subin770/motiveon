<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Popup-Mapper">

<select id="selectSearchPopupList" parameterType="map" resultType="popup">
  SELECT popNo, title, content, deadLine, enabled
  FROM PopUp
  WHERE 1=1
  <if test="title != null and title != ''">
    AND title LIKE '%' || #{title} || '%'
  </if>
  <if test="enabled != null">
    AND enabled = #{enabled}
  </if>
  ORDER BY popNo DESC
</select> 
 
  <!-- 등록 -->
  <insert id="insertPopup" parameterType="popup">
    insert into PopUp (popNo,title,content,enabled,deadLine)
    values(POPUP_SEQ.NEXTVAL,#{title},#{content},#{enabled},#{deadLine, jdbcType=DATE})
  </insert>
  
  <select id="selectPopupByPopNo" parameterType="string" resultType="popup">
  SELECT popNo, title, content, deadLine, enabled
  FROM PopUp
  WHERE popNo = #{popNo}
</select>

  <!-- 수정 -->
  <update id="updatePopup" parameterType="popup">
    update PopUp
    set
      title = #{title},
      content = #{content},
      enabled = #{enabled}
    WHERE popNo = #{popNo}
  </update>


  <!-- 삭제 -->
  <delete id="deletePopup" parameterType="string">
    DELETE FROM PopUp
    WHERE popNo = #{popNo, jdbcType=VARCHAR}
  </delete>

</mapper>